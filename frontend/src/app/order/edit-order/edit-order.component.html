<form [formGroup]="form" (ngSubmit)="save()">
  <div formArrayName="items">
    <div *ngFor="let itemGroup of itemGroups.controls; index as i" [formGroupName]="i" class="my-2 edit-order-item">
      <div class="d-flex">
        <div class="flex-grow-1 mr-3">
          <div class="form-row">
            <div class="col-lg-3 mb-2 mb-lg-0">
              <label class="sr-only" [for]="'name-' + i" translate="order.edit-order.name"></label>
              <input
                #name
                formControlName="name"
                class="form-control form-control-sm"
                [id]="'name-' + i"
                [placeholder]="'order.edit-order.name' | translate"
              />
              <val-errors controlName="name" [label]="'order.edit-order.name-error-label' | translate"></val-errors>
            </div>
            <div class="col-lg-4 mb-2 mb-lg-0">
              <label class="sr-only" [for]="'identifier-' + i" translate="order.edit-order.name"></label>
              <input
                formControlName="identifier"
                class="form-control form-control-sm"
                [id]="'identifier-' + i"
                [placeholder]="'order.edit-order.identifier' | translate"
              />
              <val-errors controlName="identifier" [label]="'order.edit-order.identifier-error-label' | translate"></val-errors>
            </div>
            <div class="col-lg-2 mb-2 mb-lg-0">
              <label class="sr-only" [for]="'quantity-' + i" translate="order.edit-order.quantity"></label>
              <input
                formControlName="quantity"
                type="number"
                class="form-control form-control-sm"
                [id]="'quantity-' + i"
                [placeholder]="'order.edit-order.quantity' | translate"
                min="1"
              />
              <val-errors controlName="quantity" [label]="'order.edit-order.quantity-error-label' | translate"></val-errors>
            </div>
            <div class="col-lg-3 mb-2 mb-lg-0">
              <label class="sr-only" [for]="'unit-' + i" translate="order.edit-order.unit"></label>
              <input
                formControlName="unit"
                class="form-control form-control-sm"
                [id]="'unit-' + i"
                [placeholder]="'order.edit-order.unit' | translate"
              />
            </div>
          </div>
        </div>
        <div>
          <button
            (click)="delete(i)"
            type="button"
            class="ml-auto btn btn-sm btn-outline-danger delete-order-item"
            [disabled]="itemGroups.length === 1"
          >
            <fa-icon [icon]="deleteIcon"></fa-icon>
            <span class="sr-only" translate="order.edit-order.delete-accession"></span>
          </button>
        </div>
      </div>
      <hr class="d-lg-none my-1" />
    </div>
  </div>
  <div>
    <button (click)="addItem()" type="button" class="btn btn-sm btn-outline-secondary" id="add-item-button">
      <fa-icon [icon]="addItemIcon"></fa-icon>
      <span class="sr-only" translate="order.edit-order.add-accession"></span>
    </button>
  </div>
  <div class="text-right">
    <button class="btn btn-sm btn-primary mr-2" translate="order.edit-order.save" id="save-button"></button>
    <button type="button" class="btn btn-sm btn-danger" (click)="cancel()" translate="order.edit-order.cancel" id="cancel-button"></button>
  </div>
</form>
