{
  "extends": [
    "config:base",
    ":semanticCommitTypeAll(chore)"
  ],
  "enabledManagers": [
    "npm"
  ],
  // target chore/next branch
  "baseBranches": [
    "chore/next"
  ],
  // only 1 PR at the same time (to avoid cascading rebase)
  "prConcurrentLimit": 1,
  // auto-merge if build is OK
  "automerge": true,
  "packageRules": [
    // allow patch updates for Angular packages,
    // but we'll handle minor and major updates ourselves
    {
      "packagePatterns": [
        "^@angular/.*",
        "^@angular-devkit/.*"
      ],
      "updateTypes": [
        "minor",
        "major"
      ],
      "enabled": false
    },
    // same for TypeScript
    {
      "packageNames": [
        "typescript"
      ],
      "updateTypes": [
        "minor",
        "major"
      ],
      "enabled": false
    },
    // group all minor dependencies, once a week
    {
      "excludePackagePatterns": [
        "^@angular/.*",
        "^@angular-devkit/.*"
      ],
      "matchPackagePatterns": [
        "*"
      ],
      "matchUpdateTypes": [
        "minor",
        "patch"
      ],
      "matchCurrentVersion": ">=1",
      "groupName": "all non-major dependencies",
      "groupSlug": "all-minor-patch",
      "schedule": [
        "after 1am on Thursday"
      ]
    }
  ]
}
